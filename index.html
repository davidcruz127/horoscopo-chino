<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hor√≥scopo Chino Animado</title>

  <style>
    :root {
      --primary: #ff4757;
      --bg-body: #dfe6e9;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg-body);
      display: flex;
      justify-content: center;
      align-items: center;

      /* Fallback + soporte moderno en m√≥viles */
      min-height: 100vh;
      min-height: 100dvh;

      margin: 0;
      overflow-x: hidden; /* Evitar scroll por el confeti */
    }

    /* Contenedor principal con efecto Glassmorphism */
    .card {
      background: rgba(255, 255, 255, 0.95);
      padding: 2.5rem;
      border-radius: 25px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      max-width: 400px;

      /* Evita ocupar todo el ancho en m√≥vil */
      width: calc(100% - 32px);
      margin: 16px;

      text-align: center;
      position: relative;
      z-index: 10;
      transition: transform 0.3s ease;
      backdrop-filter: blur(10px);
      border: 2px solid white;
      box-sizing: border-box;
    }

    h1 {
      color: #2d3436;
      margin-bottom: 0.5rem;
      font-weight: 800;
    }

    input[type="date"] {
      width: 100%;
      padding: 15px;
      border: 2px solid #dfe6e9;
      border-radius: 12px;
      font-size: 16px; /* iOS: evita zoom autom√°tico */
      margin-top: 10px;
      outline: none;
      transition: 0.3s;
      box-sizing: border-box;
      background: #f8f9fa;

      -webkit-appearance: none;
      appearance: none;
    }

    input[type="date"]:focus {
      border-color: var(--primary);
      background: white;
    }

    button {
      background: linear-gradient(45deg, #ff4757, #ff6b81);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
      font-weight: bold;
      box-shadow: 0 10px 20px rgba(255, 71, 87, 0.3);
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      overflow: hidden;
    }

    button:active {
      transform: scale(0.95);
    }

    /* --- ZONA DE RESULTADOS ANIMADA --- */
    #resultado {
      display: none;
      margin-top: 30px;
      perspective: 1000px;
    }

    /* El c√≠rculo detr√°s del animal */
    .animal-container {
      width: 140px;
      height: 140px;
      background: radial-gradient(circle at 30% 30%, #fff, #f0f0f0);
      border-radius: 50%;
      margin: 0 auto 15px auto;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow:
        0 10px 20px rgba(0, 0, 0, 0.1),
        inset 0 0 20px rgba(255, 255, 255, 0.8);
      position: relative;

      /* Animaci√≥n de entrada: POP */
      animation: popIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
    }

    .animal-emoji {
      font-size: 5rem;
      z-index: 2;
      display: block;

      /* Animaci√≥n continua: FLOTAR Y LATIR */
      animation: floatAndBeat 3s ease-in-out infinite;
      filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.2));
      transform-origin: bottom center;
    }

    .texto-resultado h2 {
      margin: 0;
      font-size: 2rem;
      color: var(--primary);
      animation: slideUp 0.5s ease 0.2s backwards;
    }

    .badge-elemento {
      display: inline-block;
      background: #2d3436;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin: 10px 0;
      text-transform: uppercase;
      letter-spacing: 1px;
      animation: slideUp 0.5s ease 0.3s backwards;
    }

    .desc {
      color: #636e72;
      line-height: 1.5;
      animation: slideUp 0.5s ease 0.4s backwards;
    }

    /* --- DEFINICI√ìN DE ANIMACIONES --- */
    @keyframes popIn {
      0% { transform: scale(0) rotate(-180deg); opacity: 0; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    @keyframes floatAndBeat {
      0% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.1); } /* Sube y crece */
      100% { transform: translateY(0) scale(1); }
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* --- CONFETI (PART√çCULAS) --- */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #f00;
      animation: fall linear forwards;
      top: -10px;
      z-index: 100;
      border-radius: 2px;
      pointer-events: none;
    }

    @keyframes fall {
      to { transform: translateY(105vh) rotate(720deg); }
    }

    .aviso {
      font-size: 0.75rem;
      color: #b2bec3;
      margin-top: 15px;
    }

    @media (max-width: 420px) {
      .card {
        padding: 1.4rem;
        max-width: 360px;
        width: calc(100% - 24px);
        margin: 12px;
        border-radius: 20px;
      }

      h1 { font-size: 1.6rem; }

      .animal-container {
        width: 120px;
        height: 120px;
      }

      .animal-emoji { font-size: 4.2rem; }

      button {
        padding: 14px 20px;
        font-size: 1rem;
      }
    }
  </style>
</head>

<body>
  <div class="card" id="tarjeta">
    <h1>Hor√≥scopo Chino ‚ú®</h1>
    <p style="color:#636e72;">Descubre tu animal espiritual</p>

    <input type="date" id="fechaNacimiento" />
    <button onclick="calcular()">¬°Revelar Animal!</button>

    <div id="resultado">
      <div class="animal-container" id="bgAnimal">
        <span class="animal-emoji" id="emoji">üê≤</span>
      </div>

      <div class="texto-resultado">
        <h2 id="nombre">Drag√≥n</h2>
        <span class="badge-elemento" id="elemento">Fuego</span>
        <p class="desc" id="descripcion">Descripci√≥n...</p>
      </div>

      <p class="aviso" id="avisoMes" style="display:none;">
        ‚ö†Ô∏è Verifica si naciste antes del A√±o Nuevo Chino (Ene/Feb).
      </p>
    </div>
  </div>

  <script>
    function calcular() {
      const input = document.getElementById('fechaNacimiento').value;
      if (!input) return alert("Por favor selecciona una fecha");

      const fecha = new Date(input);
      const anio = fecha.getFullYear();

      // Datos
      const animales = [
        { n: "Rata", e: "üêÄ", d: "Astuta y encantadora" }, { n: "Buey", e: "üêÇ", d: "Fuerte y constante" },
        { n: "Tigre", e: "üêÖ", d: "Valiente y l√≠der" }, { n: "Conejo", e: "üêá", d: "Amable y elegante" },
        { n: "Drag√≥n", e: "üêâ", d: "Poderoso y noble" }, { n: "Serpiente", e: "üêç", d: "Sabia y misteriosa" },
        { n: "Caballo", e: "üêé", d: "Libre y alegre" }, { n: "Cabra", e: "üêê", d: "Creativa y pac√≠fica" },
        { n: "Mono", e: "üêí", d: "Divertido e ingenioso" }, { n: "Gallo", e: "üêì", d: "Orgulloso y trabajador" },
        { n: "Perro", e: "üêï", d: "Leal y honesto" }, { n: "Cerdo", e: "üêñ", d: "Generoso y feliz" }
      ];

      // C√°lculo animal (aprox. por a√±o)
      let indice = (anio - 4) % 12;
      if (indice < 0) indice += 12;
      const animal = animales[indice];

      // Elemento (simplificado por √∫ltimo d√≠gito)
      const ultimo = parseInt(anio.toString().slice(-1), 10);
      let elemData = { t: "Metal", c: "#b2bec3" };
      if (ultimo <= 1) elemData = { t: "Metal", c: "#95a5a6" };
      else if (ultimo <= 3) elemData = { t: "Agua", c: "#3498db" };
      else if (ultimo <= 5) elemData = { t: "Madera", c: "#2ecc71" };
      else if (ultimo <= 7) elemData = { t: "Fuego", c: "#e74c3c" };
      else elemData = { t: "Tierra", c: "#e67e22" };

      // Actualizar DOM
      const resDiv = document.getElementById('resultado');
      resDiv.style.display = 'none'; // reinicia animaci√≥n

      setTimeout(() => {
        resDiv.style.display = 'block';

        // Textos
        document.getElementById('emoji').innerText = animal.e;
        document.getElementById('nombre').innerText = animal.n;
        document.getElementById('descripcion').innerText = animal.d;
        document.getElementById('elemento').innerText = elemData.t;

        // Colores din√°micos
        document.getElementById('elemento').style.background = elemData.c;
        document.getElementById('nombre').style.color = elemData.c;

        // Fondo del c√≠rculo del animal
        document.getElementById('bgAnimal').style.background =
          `radial-gradient(circle, #fff, ${elemData.c}33)`;

        // Aviso Enero/Febrero
        const mes = fecha.getMonth();
        document.getElementById('avisoMes').style.display = (mes <= 1) ? 'block' : 'none';

        // Confeti (menos en m√≥viles para rendimiento)
        lanzarConfeti(elemData.c);
      }, 50);
    }

    // Confeti sin librer√≠as externas
    function lanzarConfeti(colorTema) {
      const colores = [colorTema, '#f1c40f', '#ecf0f1'];

      const cantidad = window.innerWidth < 420 ? 30 : 50;

      for (let i = 0; i < cantidad; i++) {
        const confeti = document.createElement('div');
        confeti.classList.add('confetti');

        // Posici√≥n aleatoria horizontal
        confeti.style.left = Math.random() * 100 + 'vw';

        // Color aleatorio
        confeti.style.backgroundColor = colores[Math.floor(Math.random() * colores.length)];

        // Velocidad aleatoria (2s a 5s)
        confeti.style.animationDuration = (Math.random() * 3 + 2) + 's';

        // Tama√±o aleatorio
        const size = (Math.random() * 10 + 5) + 'px';
        confeti.style.width = size;
        confeti.style.height = size;

        document.body.appendChild(confeti);

        // Limpiar del DOM
        setTimeout(() => confeti.remove(), 5500);
      }
    }
  </script>
</body>
</html>
